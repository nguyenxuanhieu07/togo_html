jQuery(document).ready(function (e) {
    var s = jQuery(".btn-mb-menu");
    s.length > 0 &&
        s.on("click", function () {
            jQuery(".header-menu").toggleClass("show"),
                jQuery(".header-menu").hasClass("show")
                    ? (jQuery(this).find("i").removeClass("fa-bars"), jQuery(this).find("i").addClass("fa-times"))
                    : (jQuery(this).find("i").addClass("fa-bars"), jQuery(this).find("i").removeClass("fa-times"));
        }),
        e(window).on("scroll", function () {
            e(this).scrollTop() > 100 ? e(".header").addClass("scrolled") : e(".header").removeClass("scrolled");
        });
    let o = e(".scrollLoop");
    o.each(function () {
        let s = e(this).find(".loop-item");
        s.append(s.html());
        let t = 0,
            l = s.width() / 2;
        function n() {
            (t -= 1), Math.abs(t) >= l && (t = 0), s.css("transform", `translateX(${t}px)`);
        }
        let a = setInterval(n, 20);
        o.on("mouseenter", function () {
            clearInterval(a);
        }),
            o.on("mouseleave", function () {
                a = setInterval(n, 20);
            });
    });
    var t = e(".list-feedback"),
        l = e(".list-feedback .inner");
    t.length > 0 &&
        l.length > 1 &&
        t.slick({
            dots: !1,
            arrow: !0,
            speed: 1e3,
            autoplay: !1,
            autoplaySpeed: 5e3,
            slidesToShow: 1,
            slidesToScroll: 1,
            responsive: [{ breakpoint: 575, settings: { slidesToShow: 1, slidesToScroll: 1, infinite: !0, dots: !1, centerMode: !1, arrows: !1 } }],
        });
    function animateCounter(element) {
        const from = parseInt(element.getAttribute("data-from-value")) || 0;
        const to = parseInt(element.getAttribute("data-to-value")) || 0;
        const duration = parseInt(element.getAttribute("data-duration")) || 2000;

        let startTime = null;

        function updateCounter(currentTime) {
            if (!startTime) startTime = currentTime;
            const progress = Math.min((currentTime - startTime) / duration, 1);
            let value = Math.floor(progress * (to - from) + from);
            value = value.toLocaleString('en-US')
            element.textContent = value;

            if (progress < 1) {
            requestAnimationFrame(updateCounter);
            }
        }

        requestAnimationFrame(updateCounter);
    }
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
            animateCounter(entry.target);
            observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });
    document.querySelectorAll(".counter-number").forEach(el => {
        observer.observe(el);
    });
    const observerAnimation = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
            entry.target.classList.add("animate");
            // Nếu chỉ muốn chạy 1 lần:
            observer.unobserve(entry.target);
            }
        });
        }, { threshold: 0.3 });

    document.querySelectorAll('.togo-fade-in-left').forEach(el => {
        observerAnimation.observe(el);
    });
    document.querySelectorAll('.togo-fade-in-right').forEach(el => {
        observerAnimation.observe(el);
    });
    jQuery('.header .nav-item').on('show.bs.dropdown', function(){
        if(jQuery(window).width() < 768){
            jQuery('.header .navbar-nav').css({transform: 'translateX(-100%)'})
        }
    })
    jQuery('.mobie-menu-back').on('click', function(){
        jQuery('.header .navbar-nav').css({transform: 'translateX(0)'})
    })
    jQuery('.btn-mb-menu').on('click', function(){
        jQuery('.header').addClass('is-active');
    })
    jQuery('.mobile-menu-close').on('click', function(){
        jQuery('.header').removeClass('is-active');
        jQuery('.header-menu').removeClass('show');
        jQuery('.header .navbar-nav').css({transform: 'translateX(0)'});
        jQuery('.btn-mb-menu i').addClass('fa-bars').removeClass('fa-times')
    })
});
